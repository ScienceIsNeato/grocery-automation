<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fuzzy Matching Tool</title>
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1600px;
            margin: 0 auto;
            padding: 15px;
            background: #0d1117;
            color: #c9d1d9;
            font-size: 14px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        h1 { color: #58a6ff; margin: 0; font-size: 24px; }
        .source-badge {
            background: #8250df;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
        }
        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            font-size: 13px;
        }
        .stat { color: #8b949e; }
        .stat strong { color: #58a6ff; }
        table {
            width: 100%;
            border-collapse: collapse;
            background: #161b22;
            border-radius: 6px;
            overflow: hidden;
            font-size: 13px;
        }
        th, td {
            padding: 8px 10px;
            text-align: left;
            border-bottom: 1px solid #21262d;
            vertical-align: middle;
        }
        th {
            background: #21262d;
            color: #8b949e;
            font-weight: 600;
            font-size: 11px;
            text-transform: uppercase;
        }
        tr:hover { background: #1c2128; }
        tr.mapped { background: #0d2818; }
        tr.new { background: #1e1a2d; }
        tr.processed { 
            opacity: 0; 
            transition: opacity 0.3s ease-out;
        }
        tr.processed.hidden { display: none; }
        .row-num { color: #484f58; width: 30px; }
        .item-name { font-weight: 500; width: 200px; word-break: break-word; }
        .editable-item {
            padding: 4px 6px;
            border-radius: 3px;
            border: 1px solid transparent;
            display: inline-block;
            min-width: 100px;
        }
        .editable-item:hover { border-color: #30363d; background: #0d1117; }
        .editable-item:focus { 
            border-color: #58a6ff; 
            background: #0d1117; 
            outline: none; 
        }
        .editable-item.edited { 
            border-color: #d29922; 
            background: #2d1b0e;
        }
        .qty-cell { width: 60px; }
        .qty-input {
            width: 50px;
            padding: 6px 4px;
            border: 1px solid #30363d;
            border-radius: 4px;
            font-size: 12px;
            background: #0d1117;
            color: #c9d1d9;
            text-align: center;
        }
        .qty-input:focus { border-color: #58a6ff; outline: none; }
        .matches-cell { 
            display: flex; 
            gap: 6px; 
            flex-wrap: wrap;
            width: 500px;
        }
        .match-btn {
            padding: 6px 10px;
            background: #21262d;
            color: #c9d1d9;
            border: 1px solid #30363d;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex: 1;
            min-width: 0;
        }
        .match-btn:hover { background: #30363d; border-color: #58a6ff; }
        .match-btn.active { background: #238636; border-color: #2ea043; }
        .match-btn.empty { opacity: 0.3; cursor: not-allowed; }
        .actions-cell { 
            display: flex; 
            gap: 6px;
            width: 220px;
        }
        .manual-btn, .new-btn {
            padding: 6px 10px;
            background: #21262d;
            color: #c9d1d9;
            border: 1px solid #30363d;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            white-space: nowrap;
        }
        .manual-btn:hover { background: #30363d; border-color: #d29922; }
        .new-btn:hover { background: #30363d; border-color: #8250df; }
        .new-btn.active { background: #8250df; border-color: #a371f7; }
        .selection-cell { width: 250px; font-size: 12px; color: #7ee787; }
        .status-cell { width: 30px; font-size: 16px; text-align: center; }
        .action-bar {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .generate-btn {
            padding: 10px 20px;
            background: #238636;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }
        .generate-btn:hover { background: #2ea043; }
        .output-section {
            margin-top: 15px;
            display: none;
        }
        .output-section.visible { display: block; }
        .output-section h3 { color: #238636; margin-bottom: 10px; font-size: 16px; }
        .json-output {
            width: 100%;
            height: 150px;
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 10px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 11px;
            color: #7ee787;
            resize: vertical;
        }
        .copy-btn {
            margin-top: 8px;
            padding: 8px 16px;
            background: #da3633;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        .copy-btn:hover { background: #f85149; }
        .new-items-section {
            margin-top: 15px;
            padding: 15px;
            background: #161b22;
            border-radius: 6px;
        }
        .new-items-section h4 { margin: 0 0 10px 0; color: #8250df; }
        .new-items-list { color: #7ee787; font-family: 'SF Mono', Monaco, monospace; font-size: 12px; }
        
        /* Modal for manual selection */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
        }
        .modal.visible { display: flex; align-items: center; justify-content: center; }
        .modal-content {
            background: #161b22;
            padding: 20px;
            border-radius: 8px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        .modal-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            margin-bottom: 15px;
        }
        .modal-header h2 { margin: 0; color: #58a6ff; font-size: 18px; }
        .modal-close {
            background: #da3633;
            border: none;
            color: white;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
        }
        .modal-close:hover { background: #f85149; }
        .search-box {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
            color: #c9d1d9;
            font-size: 14px;
        }
        .search-box:focus { border-color: #58a6ff; outline: none; }
        .product-list {
            max-height: 400px;
            overflow-y: auto;
        }
        .product-item {
            padding: 10px;
            margin-bottom: 6px;
            background: #21262d;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .product-item:hover { background: #30363d; }
        .product-item.hidden { display: none; }
        .product-key { font-family: 'SF Mono', Monaco, monospace; color: #7ee787; }
        .product-display { color: #8b949e; font-size: 12px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ” Fuzzy Match Existing Products</h1>
        <span class="source-badge">ğŸ§  Phase 1: Match Existing</span>
    </div>
    
    <div class="stats">
        <span class="stat">Remaining: <strong>34 / 34</strong></span>
        <span class="stat">Mapped: <strong id="matched-count">0</strong></span>
        <span class="stat">New: <strong id="new-count">0</strong></span>
    </div>
    
    <p style="color: #8b949e; font-size: 13px; margin-bottom: 15px;">
        Before searching Hy-Vee, let's check if these items already exist in your product library with slightly different names.
        Select a fuzzy match, browse the full list, or mark as NEW to search Hy-Vee.
    </p>
    
    <table>
        <thead>
            <tr>
                <th>#</th>
                <th>Item from Google Tasks</th>
                <th>Qty</th>
                <th>Top 3 Fuzzy Matches (click to select)</th>
                <th>Actions</th>
                <th>Selection</th>
                <th></th>
            </tr>
        </thead>
        <tbody id="items-body">
            
        <tr data-item="One votive candle" data-original="One votive candle" data-status="pending" data-quantity="1">
            <td class="row-num">1</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">One votive candle</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Bananas 10" data-original="Bananas 10" data-status="pending" data-quantity="1">
            <td class="row-num">2</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Bananas 10</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'bananas')" data-match="bananas" title="Fresh Chiquita Bananas">82% Fresh Chiquita Bananas</button>
                <button class="match-btn" onclick="selectMatch(this, '5 bananas')" data-match="5 bananas" title="Fresh Chiquita Bananas">73% Fresh Chiquita Bananas</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="American cheese slices" data-original="American cheese slices" data-status="pending" data-quantity="1">
            <td class="row-num">3</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">American cheese slices</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'cottage cheese two small containers')" data-match="cottage cheese two small containers" title="Hyvee 4 Small Curd Cottage Cheese">52% Hyvee 4 Small Curd Cottage Che</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="One small container sugar-free cool with" data-original="One small container sugar-free cool with" data-status="pending" data-quantity="1">
            <td class="row-num">4</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">One small container sugar-free cool with</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'one container sugar-free cool whip')" data-match="one container sugar-free cool whip" title="Hy-Vee Whipped Topping Zero Sugar">86% Hy-Vee Whipped Topping Zero Su</button>
                <button class="match-btn" onclick="selectMatch(this, 'sour cream two small containers')" data-match="sour cream two small containers" title="Hyvee Light Sour Cream">53% Hyvee Light Sour Cream</button>
                <button class="match-btn" onclick="selectMatch(this, 'cottage cheese two small containers')" data-match="cottage cheese two small containers" title="Hyvee 4 Small Curd Cottage Cheese">50% Hyvee 4 Small Curd Cottage Che</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Two boxes vanilla wafers" data-original="Two boxes vanilla wafers" data-status="pending" data-quantity="1">
            <td class="row-num">5</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Two boxes vanilla wafers</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Cantaloupe" data-original="Cantaloupe" data-status="pending" data-quantity="1">
            <td class="row-num">6</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Cantaloupe</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Frozen shrimp ring" data-original="Frozen shrimp ring" data-status="pending" data-quantity="1">
            <td class="row-num">7</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Frozen shrimp ring</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'frozen shrimp alfredo')" data-match="frozen shrimp alfredo" title="Lean Cuisine Protein Kick Shrimp Alfredo">76% Lean Cuisine Protein Kick Shri</button>
                <button class="match-btn" onclick="selectMatch(this, 'frozen shrimp cocktail')" data-match="frozen shrimp cocktail" title="Fish Market Shrimp Platter with Cocktail Sauce">75% Fish Market Shrimp Platter wit</button>
                <button class="match-btn" onclick="selectMatch(this, 'one box frozen shrimp alfredo dinner')" data-match="one box frozen shrimp alfredo dinner" title="Lean Cuisine Protein Kick Shrimp Alfredo">62% Lean Cuisine Protein Kick Shri</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Cranberry juice remodels" data-original="Cranberry juice remodels" data-status="pending" data-quantity="1">
            <td class="row-num">8</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Cranberry juice remodels</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'cranberry juice free bottles')" data-match="cranberry juice free bottles" title="Ocean Spray Diet Cranberry Juice Drink">80% Ocean Spray Diet Cranberry Jui</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Grape juice free bottles" data-original="Grape juice free bottles" data-status="pending" data-quantity="1">
            <td class="row-num">9</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Grape juice free bottles</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'cranberry juice free bottles')" data-match="cranberry juice free bottles" title="Ocean Spray Diet Cranberry Juice Drink">84% Ocean Spray Diet Cranberry Jui</button>
                <button class="match-btn" onclick="selectMatch(this, 'fresca bottles')" data-match="fresca bottles" title="Fresca Grapefruit Citrus Soda 6pk">57% Fresca Grapefruit Citrus Soda </button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="That\'s my mom\'s salad dressing" data-original="That\'s my mom\'s salad dressing" data-status="pending" data-quantity="1">
            <td class="row-num">10</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">That's my mom's salad dressing</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Yeah so: chocolate cherry crunch three boxes" data-original="Yeah so: chocolate cherry crunch three boxes" data-status="pending" data-quantity="1">
            <td class="row-num">11</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Yeah so: chocolate cherry crunch three boxes</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'yasso bars 2x cherry chocolate crunch')" data-match="yasso bars 2x cherry chocolate crunch" title="Yasso Frozen Greek Yogurt Cherry Chocolate Crunch Bars 4ct">51% Yasso Frozen Greek Yogurt Cher</button>
                <button class="match-btn" onclick="selectMatch(this, 'large chunk chocolate chip coookies')" data-match="large chunk chocolate chip coookies" title="Chips Ahoy Chunky Chocolate Chip Cookies Family Size">50% Chips Ahoy Chunky Chocolate Ch</button>
                <button class="match-btn" onclick="selectMatch(this, 'cranberry juice free bottles')" data-match="cranberry juice free bottles" title="Ocean Spray Diet Cranberry Juice Drink">44% Ocean Spray Diet Cranberry Jui</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="18 Oz package cream cheese" data-original="18 Oz package cream cheese" data-status="pending" data-quantity="18">
            <td class="row-num">12</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">18 Oz package cream cheese</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="18" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'cottage cheese (3x)')" data-match="cottage cheese (3x)" title="Hy-Vee 4% Small Curd Cottage Cheese">52% Hy-Vee 4% Small Curd Cottage C</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Havarti cheese slices" data-original="Havarti cheese slices" data-status="pending" data-quantity="1">
            <td class="row-num">13</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Havarti cheese slices</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'cottage cheese two small containers')" data-match="cottage cheese two small containers" title="Hyvee 4 Small Curd Cottage Cheese">50% Hyvee 4 Small Curd Cottage Che</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Shredded cheddar cheese Sharp" data-original="Shredded cheddar cheese Sharp" data-status="pending" data-quantity="1">
            <td class="row-num">14</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Shredded cheddar cheese Sharp</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'shredded cheddar cheese')" data-match="shredded cheddar cheese" title="Hyvee Finely Shredded Mild Cheddar Natural Cheese">88% Hyvee Finely Shredded Mild Che</button>
                <button class="match-btn" onclick="selectMatch(this, 'shredded lettuce')" data-match="shredded lettuce" title="Dole Shredded Iceberg Lettuce">48% Dole Shredded Iceberg Lettuce</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Fresh mushrooms" data-original="Fresh mushrooms" data-status="pending" data-quantity="1">
            <td class="row-num">15</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Fresh mushrooms</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'cream of mushroom soup')" data-match="cream of mushroom soup" title="Campbells 25 Less Sodium Cream Of Mushroom Condensed Soup">64% Campbells 25 Less Sodium Cream</button>
                <button class="match-btn" onclick="selectMatch(this, 'fresh bass')" data-match="fresh bass" title="Fresh USA Farm Raised Rainbow Trout Fillets">64% Fresh USA Farm Raised Rainbow </button>
                <button class="match-btn" onclick="selectMatch(this, 'fresh thyme')" data-match="fresh thyme" title="Ernessi Farms Thyme">53% Ernessi Farms Thyme</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Spaghetti sauce" data-original="Spaghetti sauce" data-status="pending" data-quantity="1">
            <td class="row-num">16</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Spaghetti sauce</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'tartar sauce')" data-match="tartar sauce" title="Hy-Vee Tartar Sauce">59% Hy-Vee Tartar Sauce</button>
                <button class="match-btn" onclick="selectMatch(this, 'froxen spagheet and meat sauce dinner')" data-match="froxen spagheet and meat sauce dinner" title="Stouffers Spaghetti With Meat Sauce Frozen Meal">53% Stouffers Spaghetti With Meat </button>
                <button class="match-btn" onclick="selectMatch(this, 'shredded lettuce')" data-match="shredded lettuce" title="Dole Shredded Iceberg Lettuce">51% Dole Shredded Iceberg Lettuce</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Angel hair spaghetti" data-original="Angel hair spaghetti" data-status="pending" data-quantity="1">
            <td class="row-num">17</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Angel hair spaghetti</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Frozen dinner: shrimp alfredo" data-original="Frozen dinner: shrimp alfredo" data-status="pending" data-quantity="1">
            <td class="row-num">18</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Frozen dinner: shrimp alfredo</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'frozen shrimp alfredo')" data-match="frozen shrimp alfredo" title="Lean Cuisine Protein Kick Shrimp Alfredo">84% Lean Cuisine Protein Kick Shri</button>
                <button class="match-btn" onclick="selectMatch(this, 'one box frozen shrimp alfredo dinner')" data-match="one box frozen shrimp alfredo dinner" title="Lean Cuisine Protein Kick Shrimp Alfredo">64% Lean Cuisine Protein Kick Shri</button>
                <button class="match-btn" onclick="selectMatch(this, 'frozen shrimp cocktail')" data-match="frozen shrimp cocktail" title="Fish Market Shrimp Platter with Cocktail Sauce">62% Fish Market Shrimp Platter wit</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Frozen dinner, swedish meatballs" data-original="Frozen dinner, swedish meatballs" data-status="pending" data-quantity="1">
            <td class="row-num">19</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Frozen dinner, swedish meatballs</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'frozen sweedish meatballs')" data-match="frozen sweedish meatballs" title="Boston Market Swedish Meatballs Swedish Meatballs 131 Oz">84% Boston Market Swedish Meatball</button>
                <button class="match-btn" onclick="selectMatch(this, 'swedish meatball frozen meal')" data-match="swedish meatball frozen meal" title="Marie Callenders Swedish Meatballs Bowl Frozen Meal">53% Marie Callenders Swedish Meatb</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Frozen mixed vegetables" data-original="Frozen mixed vegetables" data-status="pending" data-quantity="1">
            <td class="row-num">20</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Frozen mixed vegetables</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'frozen shrimp cocktail')" data-match="frozen shrimp cocktail" title="Fish Market Shrimp Platter with Cocktail Sauce">53% Fish Market Shrimp Platter wit</button>
                <button class="match-btn" onclick="selectMatch(this, 'frozen pizza')" data-match="frozen pizza" title="Brew Pub Lotzza Motzza Pepperoni Pizza">51% Brew Pub Lotzza Motzza Peppero</button>
                <button class="match-btn" onclick="selectMatch(this, 'frozen lima beans')" data-match="frozen lima beans" title="Hy-Vee Baby Lima Beans Fresh Steam">55% Hy-Vee Baby Lima Beans Fresh S</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Frozen corn" data-original="Frozen corn" data-status="pending" data-quantity="1">
            <td class="row-num">21</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Frozen corn</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'frozen pizza')" data-match="frozen pizza" title="Brew Pub Lotzza Motzza Pepperoni Pizza">60% Brew Pub Lotzza Motzza Peppero</button>
                <button class="match-btn" onclick="selectMatch(this, 'frozen lima beans')" data-match="frozen lima beans" title="Hy-Vee Baby Lima Beans Fresh Steam">57% Hy-Vee Baby Lima Beans Fresh S</button>
                <button class="match-btn" onclick="selectMatch(this, 'frozen shrimp cocktail')" data-match="frozen shrimp cocktail" title="Fish Market Shrimp Platter with Cocktail Sauce">54% Fish Market Shrimp Platter wit</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Frozen limas" data-original="Frozen limas" data-status="pending" data-quantity="1">
            <td class="row-num">22</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Frozen limas</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'frozen lima beans')" data-match="frozen lima beans" title="Hy-Vee Baby Lima Beans Fresh Steam">82% Hy-Vee Baby Lima Beans Fresh S</button>
                <button class="match-btn" onclick="selectMatch(this, 'frozen pizza')" data-match="frozen pizza" title="Brew Pub Lotzza Motzza Pepperoni Pizza">75% Brew Pub Lotzza Motzza Peppero</button>
                <button class="match-btn" onclick="selectMatch(this, 'frozen shrimp alfredo')" data-match="frozen shrimp alfredo" title="Lean Cuisine Protein Kick Shrimp Alfredo">60% Lean Cuisine Protein Kick Shri</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="One kimbasa" data-original="One kimbasa" data-status="pending" data-quantity="1">
            <td class="row-num">23</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">One kimbasa</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'frozen lima beans')" data-match="frozen lima beans" title="Hy-Vee Baby Lima Beans Fresh Steam">57% Hy-Vee Baby Lima Beans Fresh S</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="1 lb salted butter" data-original="1 lb salted butter" data-status="pending" data-quantity="1">
            <td class="row-num">24</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">1 lb salted butter</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'lightly salted potato chips')" data-match="lightly salted potato chips" title="Lays Lightly Salted Classic Potato Chips">51% Lays Lightly Salted Classic Po</button>
                <button class="match-btn" onclick="selectMatch(this, 'lightly salted chips')" data-match="lightly salted chips" title="Lay's Lightly Salted Classic Potato Chips">50% Lay's Lightly Salted Classic P</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="One small house avocado" data-original="One small house avocado" data-status="pending" data-quantity="1">
            <td class="row-num">25</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">One small house avocado</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="One tomato" data-original="One tomato" data-status="pending" data-quantity="1">
            <td class="row-num">26</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">One tomato</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'tomatoes')" data-match="tomatoes" title="Tomatoes on the Vine">66% Tomatoes on the Vine</button>
                <button class="match-btn" onclick="selectMatch(this, 'tomatoes 3')" data-match="tomatoes 3" title="Roma Tomatoes">60% Roma Tomatoes</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Spinach, fresh" data-original="Spinach, fresh" data-status="pending" data-quantity="1">
            <td class="row-num">27</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Spinach, fresh</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Iceberg lettuce" data-original="Iceberg lettuce" data-status="pending" data-quantity="1">
            <td class="row-num">28</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Iceberg lettuce</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'shredded lettuce')" data-match="shredded lettuce" title="Dole Shredded Iceberg Lettuce">64% Dole Shredded Iceberg Lettuce</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Chicken thighs" data-original="Chicken thighs" data-status="pending" data-quantity="1">
            <td class="row-num">29</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Chicken thighs</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'chicken thigs')" data-match="chicken thigs" title="Hyvee True All Natural Cage Free Boneless Skinless Chicken Thigh Meat">96% Hyvee True All Natural Cage Fr</button>
                <button class="match-btn" onclick="selectMatch(this, 'pickled herring')" data-match="pickled herring" title="Fish Market Herring Fillets In Wine Sauce">41% Fish Market Herring Fillets In</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="C9bb salllÃ d kit" data-original="C9bb salllÃ d kit" data-status="pending" data-quantity="1">
            <td class="row-num">30</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">C9bb salllÃ d kit</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'asian salad kit')" data-match="asian salad kit" title="Dole Chopped Sesame Asian">58% Dole Chopped Sesame Asian</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="409 spray" data-original="409 spray" data-status="pending" data-quantity="409">
            <td class="row-num">31</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">409 spray</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="409" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Dawn dish soap" data-original="Dawn dish soap" data-status="pending" data-quantity="1">
            <td class="row-num">32</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Dawn dish soap</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'pack of dish sponges')" data-match="pack of dish sponges" title="Scotch-Brite Heavy Duty Scrub Sponges">52% Scotch-Brite Heavy Duty Scrub </button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="bag storage clips" data-original="bag storage clips" data-status="pending" data-quantity="1">
            <td class="row-num">33</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">bag storage clips</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn" onclick="selectMatch(this, 'lightly salted chips')" data-match="lightly salted chips" title="Lay's Lightly Salted Classic Potato Chips">54% Lay's Lightly Salted Classic P</button>
                <button class="match-btn" onclick="selectMatch(this, 'bag of potatoes')" data-match="bag of potatoes" title="Green Giant Red Potatoes">50% Green Giant Red Potatoes</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        <tr data-item="Silver polish colon 1 wright\'\'s" data-original="Silver polish colon 1 wright\'\'s" data-status="pending" data-quantity="1">
            <td class="row-num">34</td>
            <td class="item-name"><span class="editable-item" contenteditable="true" spellcheck="false" onblur="trackEdit(this)">Silver polish colon 1 wright''s</span></td>
            <td class="qty-cell"><input type="number" class="qty-input" value="1" min="1" max="99" onchange="updateQuantity(this)" /></td>
            <td class="matches-cell">
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
                <button class="match-btn empty" disabled>â€”</button>
            </td>
            <td class="actions-cell">
                <button class="manual-btn" onclick="showManualSelect(this)">ğŸ“‹ Browse All</button>
                <button class="new-btn active" onclick="markAsNew(this)">âœ¨ NEW</button>
            </td>
            <td class="selection-cell"></td>
            <td class="status-cell">ğŸ†•</td>
        </tr>
        </tbody>
    </table>
    
    <div class="action-bar">
        <button class="generate-btn" onclick="updateListDetails()">âœ¨ Update List Details</button>
        <span style="color: #8b949e; font-size: 12px; margin-left: 10px;">
            (Writes substitutions, renames tasks, and re-runs orchestrator)
        </span>
    </div>
    
    <div class="output-section" id="output-section">
        <h3 id="output-title">â³ Processing...</h3>
        <div id="output-content"></div>
    </div>
    
    <!-- Manual selection modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Browse All Products</h2>
                <button class="modal-close" onclick="closeModal()">âœ•</button>
            </div>
            <input type="text" class="search-box" id="modal-search" placeholder="Type to filter..." onkeyup="filterProducts()">
            <div class="product-list" id="product-list">
                <div class="product-item" onclick="selectProduct('5 bananas')"><span class="product-display">Fresh Chiquita Bananas</span><span class="product-key">5 bananas</span></div>
<div class="product-item" onclick="selectProduct('asian salad kit')"><span class="product-display">Dole Chopped Sesame Asian</span><span class="product-key">asian salad kit</span></div>
<div class="product-item" onclick="selectProduct('avocado')"><span class="product-display">Hass Avocados</span><span class="product-key">avocado</span></div>
<div class="product-item" onclick="selectProduct('bag of potatoes')"><span class="product-display">Green Giant Red Potatoes</span><span class="product-key">bag of potatoes</span></div>
<div class="product-item" onclick="selectProduct('baja blast zero')"><span class="product-display">Mountain Dew Zero Sugar Baja Blast 12 Pack</span><span class="product-key">baja blast zero</span></div>
<div class="product-item" onclick="selectProduct('baked beans (canned)')"><span class="product-display">Hy-Vee Maple Cured Bacon Baked Beans</span><span class="product-key">baked beans (canned)</span></div>
<div class="product-item" onclick="selectProduct('bananas')"><span class="product-display">Fresh Chiquita Bananas</span><span class="product-key">bananas</span></div>
<div class="product-item" onclick="selectProduct('bread whole wheat')"><span class="product-display">Daves Killer Bread 21 Whole Grains And Seeds Whole Grain Organic Bread</span><span class="product-key">bread whole wheat</span></div>
<div class="product-item" onclick="selectProduct('butter 2 lb ( salted and parentheses')"><span class="product-display">Hyvee Sweet Cream Salted Butter Quarters</span><span class="product-key">butter 2 lb ( salted and parentheses</span></div>
<div class="product-item" onclick="selectProduct('chicken thigs')"><span class="product-display">Hyvee True All Natural Cage Free Boneless Skinless Chicken Thigh Meat</span><span class="product-key">chicken thigs</span></div>
<div class="product-item" onclick="selectProduct('christmas cookies from delhi')"><span class="product-display">Bakery Fresh Spritz And Thumbprint Tray 48 Count</span><span class="product-key">christmas cookies from delhi</span></div>
<div class="product-item" onclick="selectProduct('chuck roast (2-3 lb)')"><span class="product-display">Hy-Vee Choice Reserve Beef Bottom Round Roast</span><span class="product-key">chuck roast (2-3 lb)</span></div>
<div class="product-item" onclick="selectProduct('cinnamon rolls ( not jumbo)')"><span class="product-display">Pillsbury Original Icing Cinnamon Rolls 8 count</span><span class="product-key">cinnamon rolls ( not jumbo)</span></div>
<div class="product-item" onclick="selectProduct('cinnamon rolls parentheses in tubes)')"><span class="product-display">Pillsbury Original Icing Cinnamon Rolls 8 Count</span><span class="product-key">cinnamon rolls parentheses in tubes)</span></div>
<div class="product-item" onclick="selectProduct('cocktail shrimp')"><span class="product-display">Fish Market Shrimp Platter With Cocktail Sauce 2630 Cooked And Peeled</span><span class="product-key">cocktail shrimp</span></div>
<div class="product-item" onclick="selectProduct('cottage cheese (3x)')"><span class="product-display">Hy-Vee 4% Small Curd Cottage Cheese</span><span class="product-key">cottage cheese (3x)</span></div>
<div class="product-item" onclick="selectProduct('cottage cheese two small containers')"><span class="product-display">Hyvee 4 Small Curd Cottage Cheese</span><span class="product-key">cottage cheese two small containers</span></div>
<div class="product-item" onclick="selectProduct('craft macaroni and cheese')"><span class="product-display">Kraft Thick N Creamy Mac And Cheese Macaroni And Cheese Dinner</span><span class="product-key">craft macaroni and cheese</span></div>
<div class="product-item" onclick="selectProduct('cran 5')"><span class="product-display">Ocean Spray Diet Cranberry Juice Drink</span><span class="product-key">cran 5</span></div>
<div class="product-item" onclick="selectProduct('cranberry juice free bottles')"><span class="product-display">Ocean Spray Diet Cranberry Juice Drink</span><span class="product-key">cranberry juice free bottles</span></div>
<div class="product-item" onclick="selectProduct('cream of mushroom soup')"><span class="product-display">Campbells 25 Less Sodium Cream Of Mushroom Condensed Soup</span><span class="product-key">cream of mushroom soup</span></div>
<div class="product-item" onclick="selectProduct('dave's bread whole wheat')"><span class="product-display">Dave's Killer Bread Good Seed Whole Grain Organic Bread</span><span class="product-key">dave's bread whole wheat</span></div>
<div class="product-item" onclick="selectProduct('fresca bottles')"><span class="product-display">Fresca Grapefruit Citrus Soda 6pk</span><span class="product-key">fresca bottles</span></div>
<div class="product-item" onclick="selectProduct('fresh bass')"><span class="product-display">Fresh USA Farm Raised Rainbow Trout Fillets</span><span class="product-key">fresh bass</span></div>
<div class="product-item" onclick="selectProduct('fresh lemon')"><span class="product-display">Kings River Lemons Premium Citrus</span><span class="product-key">fresh lemon</span></div>
<div class="product-item" onclick="selectProduct('fresh thyme')"><span class="product-display">Ernessi Farms Thyme</span><span class="product-key">fresh thyme</span></div>
<div class="product-item" onclick="selectProduct('froxen spagheet and meat sauce dinner')"><span class="product-display">Stouffers Spaghetti With Meat Sauce Frozen Meal</span><span class="product-key">froxen spagheet and meat sauce dinner</span></div>
<div class="product-item" onclick="selectProduct('frozen lima beans')"><span class="product-display">Hy-Vee Baby Lima Beans Fresh Steam</span><span class="product-key">frozen lima beans</span></div>
<div class="product-item" onclick="selectProduct('frozen pizza')"><span class="product-display">Brew Pub Lotzza Motzza Pepperoni Pizza</span><span class="product-key">frozen pizza</span></div>
<div class="product-item" onclick="selectProduct('frozen shrimp alfredo')"><span class="product-display">Lean Cuisine Protein Kick Shrimp Alfredo</span><span class="product-key">frozen shrimp alfredo</span></div>
<div class="product-item" onclick="selectProduct('frozen shrimp cocktail')"><span class="product-display">Fish Market Shrimp Platter with Cocktail Sauce</span><span class="product-key">frozen shrimp cocktail</span></div>
<div class="product-item" onclick="selectProduct('frozen sweedish meatballs')"><span class="product-display">Boston Market Swedish Meatballs Swedish Meatballs 131 Oz</span><span class="product-key">frozen sweedish meatballs</span></div>
<div class="product-item" onclick="selectProduct('fruit pop tarts')"><span class="product-display">Hy-Vee Frosted Toaster Pastries Variety Pack 12Ct</span><span class="product-key">fruit pop tarts</span></div>
<div class="product-item" onclick="selectProduct('gallon sized ziplocs')"><span class="product-display">Ziploc Gallon Storage Slider Bags 12 Ea</span><span class="product-key">gallon sized ziplocs</span></div>
<div class="product-item" onclick="selectProduct('garlic')"><span class="product-display">Jumbo Garlic</span><span class="product-key">garlic</span></div>
<div class="product-item" onclick="selectProduct('glasstop cleaner')"><span class="product-display">Bar Keepers Friend Cooktop Cleaner</span><span class="product-key">glasstop cleaner</span></div>
<div class="product-item" onclick="selectProduct('half and half')"><span class="product-display">Search</span><span class="product-key">half and half</span></div>
<div class="product-item" onclick="selectProduct('healthy orchard grape 2x')"><span class="product-display">Old Orchard Healthy Balance Diet Grape Juice Cocktail</span><span class="product-key">healthy orchard grape 2x</span></div>
<div class="product-item" onclick="selectProduct('honeydew')"><span class="product-display">Honeydew Ready To Eat</span><span class="product-key">honeydew</span></div>
<div class="product-item" onclick="selectProduct('hungry man meatloaf frozen meal')"><span class="product-display">Boston Market Meatloaf</span><span class="product-key">hungry man meatloaf frozen meal</span></div>
<div class="product-item" onclick="selectProduct('large chunk chocolate chip coookies')"><span class="product-display">Chips Ahoy Chunky Chocolate Chip Cookies Family Size</span><span class="product-key">large chunk chocolate chip coookies</span></div>
<div class="product-item" onclick="selectProduct('lemonaide')"><span class="product-display">Minute Maid Sugar Lemonade Juice</span><span class="product-key">lemonaide</span></div>
<div class="product-item" onclick="selectProduct('lightly salted chips')"><span class="product-display">Lay's Lightly Salted Classic Potato Chips</span><span class="product-key">lightly salted chips</span></div>
<div class="product-item" onclick="selectProduct('lightly salted potato chips')"><span class="product-display">Lays Lightly Salted Classic Potato Chips</span><span class="product-key">lightly salted potato chips</span></div>
<div class="product-item" onclick="selectProduct('miralax laxative large bottle')"><span class="product-display">Miralax 30 Once Daily Doses Powder Laxative</span><span class="product-key">miralax laxative large bottle</span></div>
<div class="product-item" onclick="selectProduct('one box frozen shrimp alfredo dinner')"><span class="product-display">Lean Cuisine Protein Kick Shrimp Alfredo</span><span class="product-key">one box frozen shrimp alfredo dinner</span></div>
<div class="product-item" onclick="selectProduct('one container sugar-free cool whip')"><span class="product-display">Hy-Vee Whipped Topping Zero Sugar</span><span class="product-key">one container sugar-free cool whip</span></div>
<div class="product-item" onclick="selectProduct('orange')"><span class="product-display">Navel Oranges Large</span><span class="product-key">orange</span></div>
<div class="product-item" onclick="selectProduct('pack of dish sponges')"><span class="product-display">Scotch-Brite Heavy Duty Scrub Sponges</span><span class="product-key">pack of dish sponges</span></div>
<div class="product-item" onclick="selectProduct('pickled herring')"><span class="product-display">Fish Market Herring Fillets In Wine Sauce</span><span class="product-key">pickled herring</span></div>
<div class="product-item" onclick="selectProduct('potato chips: salt and vinegar flavor')"><span class="product-display">Cape Cod Sea Salt And Vinegar Potato Chips</span><span class="product-key">potato chips: salt and vinegar flavor</span></div>
<div class="product-item" onclick="selectProduct('ready-made mashed potatoes (bob evans)')"><span class="product-display">Bob Evans Original Mashed Potatoes</span><span class="product-key">ready-made mashed potatoes (bob evans)</span></div>
<div class="product-item" onclick="selectProduct('refresh artificial tears')"><span class="product-display">Refresh Tears Pf Lubricant Eye Drops</span><span class="product-key">refresh artificial tears</span></div>
<div class="product-item" onclick="selectProduct('saltines')"><span class="product-display">Premium Saltine Crackers Original</span><span class="product-key">saltines</span></div>
<div class="product-item" onclick="selectProduct('short carrots')"><span class="product-display">Grimmway Baby Carrots</span><span class="product-key">short carrots</span></div>
<div class="product-item" onclick="selectProduct('shredded cheddar cheese')"><span class="product-display">Hyvee Finely Shredded Mild Cheddar Natural Cheese</span><span class="product-key">shredded cheddar cheese</span></div>
<div class="product-item" onclick="selectProduct('shredded lettuce')"><span class="product-display">Dole Shredded Iceberg Lettuce</span><span class="product-key">shredded lettuce</span></div>
<div class="product-item" onclick="selectProduct('small bag of yellow onions (maple and bacon variety)')"><span class="product-display">Yellow Onions</span><span class="product-key">small bag of yellow onions (maple and bacon variety)</span></div>
<div class="product-item" onclick="selectProduct('sociables crackers two boxes')"><span class="product-display">Sociables Flavor Originals Sociables Baked Savory Crackers Party Snacks</span><span class="product-key">sociables crackers two boxes</span></div>
<div class="product-item" onclick="selectProduct('sour cream two small containers')"><span class="product-display">Hyvee Light Sour Cream</span><span class="product-key">sour cream two small containers</span></div>
<div class="product-item" onclick="selectProduct('splenda packages large box')"><span class="product-display">Splenda No Calorie Sweetener Individual Packets</span><span class="product-key">splenda packages large box</span></div>
<div class="product-item" onclick="selectProduct('stuffing mix')"><span class="product-display">Pepperidge Farm Herb Seasoned Classic Stuffing</span><span class="product-key">stuffing mix</span></div>
<div class="product-item" onclick="selectProduct('swedish meatball frozen meal')"><span class="product-display">Marie Callenders Swedish Meatballs Bowl Frozen Meal</span><span class="product-key">swedish meatball frozen meal</span></div>
<div class="product-item" onclick="selectProduct('taco kit')"><span class="product-display">Old El Paso Stand n Stuff Taco Dinner Kit</span><span class="product-key">taco kit</span></div>
<div class="product-item" onclick="selectProduct('tapioca pudding cups')"><span class="product-display">Swiss Miss Tapioca Pudding 4 Oz 6count</span><span class="product-key">tapioca pudding cups</span></div>
<div class="product-item" onclick="selectProduct('tartar sauce')"><span class="product-display">Hy-Vee Tartar Sauce</span><span class="product-key">tartar sauce</span></div>
<div class="product-item" onclick="selectProduct('tomatoes')"><span class="product-display">Tomatoes on the Vine</span><span class="product-key">tomatoes</span></div>
<div class="product-item" onclick="selectProduct('tomatoes 3')"><span class="product-display">Roma Tomatoes</span><span class="product-key">tomatoes 3</span></div>
<div class="product-item" onclick="selectProduct('tropicana lite 50')"><span class="product-display">Tropicana Light No Pulp Orange Juice</span><span class="product-key">tropicana lite 50</span></div>
<div class="product-item" onclick="selectProduct('turkey lunch meat')"><span class="product-display">Land O'Frost Premium Honey Smoked Turkey Breast</span><span class="product-key">turkey lunch meat</span></div>
<div class="product-item" onclick="selectProduct('very lean ground beef')"><span class="product-display">93% Lean 7% Fat Fresh Ground Beef</span><span class="product-key">very lean ground beef</span></div>
<div class="product-item" onclick="selectProduct('watermelon')"><span class="product-display">Watermelon Wedges With Skin</span><span class="product-key">watermelon</span></div>
<div class="product-item" onclick="selectProduct('white vinegar')"><span class="product-display">Hyvee White Distilled Vinegar</span><span class="product-key">white vinegar</span></div>
<div class="product-item" onclick="selectProduct('whole frozen quiche')"><span class="product-display">La Terra Fina Spinach And Artichoke Quiche</span><span class="product-key">whole frozen quiche</span></div>
<div class="product-item" onclick="selectProduct('whole weat egg noodles')"><span class="product-display">Hyvee Select Whole Wheat Homemade Noodles</span><span class="product-key">whole weat egg noodles</span></div>
<div class="product-item" onclick="selectProduct('whole wheat egg noodles')"><span class="product-display">Hy-Vee Select Whole Wheat Homemade Noodles</span><span class="product-key">whole wheat egg noodles</span></div>
<div class="product-item" onclick="selectProduct('yasso bars 2x cherry chocolate crunch')"><span class="product-display">Yasso Frozen Greek Yogurt Cherry Chocolate Crunch Bars 4ct</span><span class="product-key">yasso bars 2x cherry chocolate crunch</span></div>
<div class="product-item" onclick="selectProduct('yasso bars 2x chocolate fudge')"><span class="product-display">Yasso Chocolate Fudge Frozen Greek Yogurt Bars 4 35 Fl Oz</span><span class="product-key">yasso bars 2x chocolate fudge</span></div>
<div class="product-item" onclick="selectProduct('yasso bars 2x cookie dough')"><span class="product-display">Yasso Chocolate Chip Cookie Dough Frozen Greek Yogurt Bars 435 Fl Oz</span><span class="product-key">yasso bars 2x cookie dough</span></div>
            </div>
        </div>
    </div>
    
    <script>
        let currentRow = null;
        const allProducts = [
    { "key": "5 bananas", "display": "Fresh Chiquita Bananas" },
    { "key": "asian salad kit", "display": "Dole Chopped Sesame Asian" },
    { "key": "avocado", "display": "Hass Avocados" },
    { "key": "bag of potatoes", "display": "Green Giant Red Potatoes" },
    { "key": "baja blast zero", "display": "Mountain Dew Zero Sugar Baja Blast 12 Pack" },
    { "key": "baked beans (canned)", "display": "Hy-Vee Maple Cured Bacon Baked Beans" },
    { "key": "bananas", "display": "Fresh Chiquita Bananas" },
    { "key": "bread whole wheat", "display": "Daves Killer Bread 21 Whole Grains And Seeds Whole Grain Organic Bread" },
    { "key": "butter 2 lb ( salted and parentheses", "display": "Hyvee Sweet Cream Salted Butter Quarters" },
    { "key": "chicken thigs", "display": "Hyvee True All Natural Cage Free Boneless Skinless Chicken Thigh Meat" },
    { "key": "christmas cookies from delhi", "display": "Bakery Fresh Spritz And Thumbprint Tray 48 Count" },
    { "key": "chuck roast (2-3 lb)", "display": "Hy-Vee Choice Reserve Beef Bottom Round Roast" },
    { "key": "cinnamon rolls ( not jumbo)", "display": "Pillsbury Original Icing Cinnamon Rolls 8 count" },
    { "key": "cinnamon rolls parentheses in tubes)", "display": "Pillsbury Original Icing Cinnamon Rolls 8 Count" },
    { "key": "cocktail shrimp", "display": "Fish Market Shrimp Platter With Cocktail Sauce 2630 Cooked And Peeled" },
    { "key": "cottage cheese (3x)", "display": "Hy-Vee 4% Small Curd Cottage Cheese" },
    { "key": "cottage cheese two small containers", "display": "Hyvee 4 Small Curd Cottage Cheese" },
    { "key": "craft macaroni and cheese", "display": "Kraft Thick N Creamy Mac And Cheese Macaroni And Cheese Dinner" },
    { "key": "cran 5", "display": "Ocean Spray Diet Cranberry Juice Drink" },
    { "key": "cranberry juice free bottles", "display": "Ocean Spray Diet Cranberry Juice Drink" },
    { "key": "cream of mushroom soup", "display": "Campbells 25 Less Sodium Cream Of Mushroom Condensed Soup" },
    { "key": "dave's bread whole wheat", "display": "Dave's Killer Bread Good Seed Whole Grain Organic Bread" },
    { "key": "fresca bottles", "display": "Fresca Grapefruit Citrus Soda 6pk" },
    { "key": "fresh bass", "display": "Fresh USA Farm Raised Rainbow Trout Fillets" },
    { "key": "fresh lemon", "display": "Kings River Lemons Premium Citrus" },
    { "key": "fresh thyme", "display": "Ernessi Farms Thyme" },
    { "key": "froxen spagheet and meat sauce dinner", "display": "Stouffers Spaghetti With Meat Sauce Frozen Meal" },
    { "key": "frozen lima beans", "display": "Hy-Vee Baby Lima Beans Fresh Steam" },
    { "key": "frozen pizza", "display": "Brew Pub Lotzza Motzza Pepperoni Pizza" },
    { "key": "frozen shrimp alfredo", "display": "Lean Cuisine Protein Kick Shrimp Alfredo" },
    { "key": "frozen shrimp cocktail", "display": "Fish Market Shrimp Platter with Cocktail Sauce" },
    { "key": "frozen sweedish meatballs", "display": "Boston Market Swedish Meatballs Swedish Meatballs 131 Oz" },
    { "key": "fruit pop tarts", "display": "Hy-Vee Frosted Toaster Pastries Variety Pack 12Ct" },
    { "key": "gallon sized ziplocs", "display": "Ziploc Gallon Storage Slider Bags 12 Ea" },
    { "key": "garlic", "display": "Jumbo Garlic" },
    { "key": "glasstop cleaner", "display": "Bar Keepers Friend Cooktop Cleaner" },
    { "key": "half and half", "display": "Search" },
    { "key": "healthy orchard grape 2x", "display": "Old Orchard Healthy Balance Diet Grape Juice Cocktail" },
    { "key": "honeydew", "display": "Honeydew Ready To Eat" },
    { "key": "hungry man meatloaf frozen meal", "display": "Boston Market Meatloaf" },
    { "key": "large chunk chocolate chip coookies", "display": "Chips Ahoy Chunky Chocolate Chip Cookies Family Size" },
    { "key": "lemonaide", "display": "Minute Maid Sugar Lemonade Juice" },
    { "key": "lightly salted chips", "display": "Lay's Lightly Salted Classic Potato Chips" },
    { "key": "lightly salted potato chips", "display": "Lays Lightly Salted Classic Potato Chips" },
    { "key": "miralax laxative large bottle", "display": "Miralax 30 Once Daily Doses Powder Laxative" },
    { "key": "one box frozen shrimp alfredo dinner", "display": "Lean Cuisine Protein Kick Shrimp Alfredo" },
    { "key": "one container sugar-free cool whip", "display": "Hy-Vee Whipped Topping Zero Sugar" },
    { "key": "orange", "display": "Navel Oranges Large" },
    { "key": "pack of dish sponges", "display": "Scotch-Brite Heavy Duty Scrub Sponges" },
    { "key": "pickled herring", "display": "Fish Market Herring Fillets In Wine Sauce" },
    { "key": "potato chips: salt and vinegar flavor", "display": "Cape Cod Sea Salt And Vinegar Potato Chips" },
    { "key": "ready-made mashed potatoes (bob evans)", "display": "Bob Evans Original Mashed Potatoes" },
    { "key": "refresh artificial tears", "display": "Refresh Tears Pf Lubricant Eye Drops" },
    { "key": "saltines", "display": "Premium Saltine Crackers Original" },
    { "key": "short carrots", "display": "Grimmway Baby Carrots" },
    { "key": "shredded cheddar cheese", "display": "Hyvee Finely Shredded Mild Cheddar Natural Cheese" },
    { "key": "shredded lettuce", "display": "Dole Shredded Iceberg Lettuce" },
    { "key": "small bag of yellow onions (maple and bacon variety)", "display": "Yellow Onions" },
    { "key": "sociables crackers two boxes", "display": "Sociables Flavor Originals Sociables Baked Savory Crackers Party Snacks" },
    { "key": "sour cream two small containers", "display": "Hyvee Light Sour Cream" },
    { "key": "splenda packages large box", "display": "Splenda No Calorie Sweetener Individual Packets" },
    { "key": "stuffing mix", "display": "Pepperidge Farm Herb Seasoned Classic Stuffing" },
    { "key": "swedish meatball frozen meal", "display": "Marie Callenders Swedish Meatballs Bowl Frozen Meal" },
    { "key": "taco kit", "display": "Old El Paso Stand n Stuff Taco Dinner Kit" },
    { "key": "tapioca pudding cups", "display": "Swiss Miss Tapioca Pudding 4 Oz 6count" },
    { "key": "tartar sauce", "display": "Hy-Vee Tartar Sauce" },
    { "key": "tomatoes", "display": "Tomatoes on the Vine" },
    { "key": "tomatoes 3", "display": "Roma Tomatoes" },
    { "key": "tropicana lite 50", "display": "Tropicana Light No Pulp Orange Juice" },
    { "key": "turkey lunch meat", "display": "Land O'Frost Premium Honey Smoked Turkey Breast" },
    { "key": "very lean ground beef", "display": "93% Lean 7% Fat Fresh Ground Beef" },
    { "key": "watermelon", "display": "Watermelon Wedges With Skin" },
    { "key": "white vinegar", "display": "Hyvee White Distilled Vinegar" },
    { "key": "whole frozen quiche", "display": "La Terra Fina Spinach And Artichoke Quiche" },
    { "key": "whole weat egg noodles", "display": "Hyvee Select Whole Wheat Homemade Noodles" },
    { "key": "whole wheat egg noodles", "display": "Hy-Vee Select Whole Wheat Homemade Noodles" },
    { "key": "yasso bars 2x cherry chocolate crunch", "display": "Yasso Frozen Greek Yogurt Cherry Chocolate Crunch Bars 4ct" },
    { "key": "yasso bars 2x chocolate fudge", "display": "Yasso Chocolate Fudge Frozen Greek Yogurt Bars 4 35 Fl Oz" },
    { "key": "yasso bars 2x cookie dough", "display": "Yasso Chocolate Chip Cookie Dough Frozen Greek Yogurt Bars 435 Fl Oz" },
  ];
        const repoRoot = '/Users/pacey/Documents/SourceCode/grocery-automation';
        
        function trackEdit(element) {
            const row = element.closest('tr');
            const newText = element.textContent.trim();
            const original = row.dataset.original;
            
            if (newText !== original && newText.length > 0) {
                row.dataset.item = newText;
                row.dataset.edited = 'true';
                element.classList.add('edited');
            } else {
                row.dataset.item = original;
                row.dataset.edited = 'false';
                element.classList.remove('edited');
            }
        }
        
        function updateQuantity(input) {
            const row = input.closest('tr');
            row.dataset.quantity = input.value;
        }
        
        function selectMatch(btn, matchKey) {
            const row = btn.closest('tr');
            
            // Clear other match buttons in this row
            row.querySelectorAll('.match-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // Clear NEW button
            row.querySelector('.new-btn').classList.remove('active');
            
            // Update row state
            row.dataset.status = 'mapped';
            row.dataset.matchedTo = matchKey;
            row.classList.add('mapped');
            row.classList.remove('new');
            
            // Update selection display
            const product = allProducts.find(p => p.key === matchKey);
            const display = product ? product.display : matchKey;
            row.querySelector('.selection-cell').textContent = `â†’ ${display}`;
            row.querySelector('.status-cell').textContent = 'âœ…';
            
            updateCounts();
        }
        
        function markAsNew(btn) {
            const row = btn.closest('tr');
            
            // Clear all match buttons
            row.querySelectorAll('.match-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // Update row state
            row.dataset.status = 'new';
            row.dataset.matchedTo = '';
            row.classList.remove('mapped');
            row.classList.add('new');
            
            row.querySelector('.selection-cell').textContent = '';
            row.querySelector('.status-cell').textContent = 'ğŸ†•';
            
            updateCounts();
        }
        
        function fadeOutRow(row) {
            row.classList.add('processed');
            setTimeout(() => {
                row.classList.add('hidden');
            }, 300);
        }
        
        function showManualSelect(btn) {
            currentRow = btn.closest('tr');
            document.getElementById('modal').classList.add('visible');
            document.getElementById('modal-search').value = '';
            document.getElementById('modal-search').focus();
            filterProducts();
        }
        
        function closeModal() {
            document.getElementById('modal').classList.remove('visible');
            currentRow = null;
        }
        
        function filterProducts() {
            const query = document.getElementById('modal-search').value.toLowerCase();
            const items = document.querySelectorAll('.product-item');
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                item.classList.toggle('hidden', !text.includes(query));
            });
        }
        
        function selectProduct(key) {
            if (!currentRow) return;
            
            // Clear other selections
            currentRow.querySelectorAll('.match-btn, .new-btn').forEach(b => b.classList.remove('active'));
            
            // Update row state
            currentRow.dataset.status = 'mapped';
            currentRow.dataset.matchedTo = key;
            currentRow.classList.add('mapped');
            currentRow.classList.remove('new');
            
            // Update display
            const product = allProducts.find(p => p.key === key);
            const display = product ? product.display : key;
            currentRow.querySelector('.selection-cell').textContent = `â†’ ${display}`;
            currentRow.querySelector('.status-cell').textContent = 'âœ…';
            
            updateCounts();
            closeModal();
        }
        
        function updateCounts() {
            const all = document.querySelectorAll('#items-body tr').length;
            const processed = document.querySelectorAll('tr.processed').length;
            const remaining = all - processed;
            const mapped = document.querySelectorAll('tr[data-status="mapped"]').length;
            const newItems = document.querySelectorAll('tr[data-status="new"]').length;
            
            document.getElementById('matched-count').textContent = mapped;
            document.getElementById('new-count').textContent = newItems;
            
            // Update header stat to show remaining
            const remainingStat = document.querySelector('.stats .stat strong');
            if (remainingStat) {
                remainingStat.textContent = `${remaining} / ${all}`;
            }
        }
        
        async function updateListDetails() {
            const btn = document.querySelector('.generate-btn');
            btn.disabled = true;
            btn.textContent = 'â³ Processing...';
            
            const rows = document.querySelectorAll('#items-body tr');
            const substitutions = [];
            const taskRenames = [];
            const newItems = [];
            
            rows.forEach(row => {
                const originalName = row.dataset.original;
                const currentName = row.dataset.item;
                const quantity = parseInt(row.dataset.quantity) || 1;
                const status = row.dataset.status;
                const matchedTo = row.dataset.matchedTo;
                const wasEdited = row.dataset.edited === 'true';
                
                // Track task renames (edited items)
                if (wasEdited && currentName !== originalName) {
                    taskRenames.push({
                        from: originalName,
                        to: currentName
                    });
                }
                
                // Track substitutions (mapped items using current name)
                if (status === 'mapped' && matchedTo) {
                    substitutions.push({
                        key: currentName,
                        value: matchedTo,
                        quantity: quantity
                    });
                } else if (status === 'new') {
                    newItems.push({
                        name: currentName,
                        quantity: quantity
                    });
                }
            });
            
            // POST to backend server
            try {
                const response = await fetch('http://127.0.0.1:8766/apply-mappings', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        repo_root: repoRoot,
                        substitutions: substitutions,
                        task_renames: taskRenames,
                        new_items: newItems
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`Server returned ${response.status}`);
                }
                
                const result = await response.json();
                
                // Show success
                document.getElementById('output-section').classList.add('visible');
                document.getElementById('output-title').textContent = 'âœ… Changes Applied!';
                const newItemsDisplay = newItems.map(ni => `${ni.name} (qty: ${ni.quantity})`).join('<br>');
                document.getElementById('output-content').innerHTML = `
                    <p style="color: #7ee787; margin-bottom: 10px;">
                        âœ“ Wrote ${substitutions.length} substitution(s) to data/substitutions.json<br>
                        âœ“ Renamed ${result.tasks_renamed || 0} task(s) in Google Tasks<br>
                        âœ“ Saved ${newItems.length} NEW item(s) for Hy-Vee search
                    </p>
                    <p style="color: #8b949e; font-size: 12px; margin-top: 15px;">
                        Re-running orchestrator automatically in 2 seconds...
                    </p>
                    ${newItems.length > 0 ? `
                        <div style="margin-top: 15px; padding: 10px; background: #161b22; border-radius: 6px;">
                            <h4 style="color: #8250df; margin: 0 0 8px 0;">âœ¨ Items to search on Hy-Vee (Phase 2):</h4>
                            <div style="color: #7ee787; font-family: monospace; font-size: 12px;">
                                ${newItemsDisplay}
                            </div>
                        </div>
                    ` : ''}
                `;
                
                // Fade out all adjudicated rows
                rows.forEach(row => {
                    const status = row.dataset.status;
                    if (status === 'mapped' || status === 'new') {
                        fadeOutRow(row);
                    }
                });
                
                // Auto-reload orchestrator (simulated - user will need to re-run manually)
                setTimeout(() => {
                    document.getElementById('output-content').innerHTML += `
                        <p style="color: #58a6ff; font-size: 14px; margin-top: 15px;">
                            âœ… Done! Close this window and check your terminal for next steps.
                        </p>
                    `;
                }, 2000);
                
            } catch (error) {
                document.getElementById('output-section').classList.add('visible');
                document.getElementById('output-title').textContent = 'âŒ Error';
                document.getElementById('output-content').innerHTML = `
                    <p style="color: #f85149;">
                        Failed to apply changes: ${error.message}
                    </p>
                    <p style="color: #8b949e; font-size: 12px; margin-top: 10px;">
                        Make sure the Flask server is running (port 8766)
                    </p>
                `;
            } finally {
                btn.disabled = false;
                btn.textContent = 'âœ¨ Update List Details';
            }
        }
        
        // Close modal on escape key
        document.addEventListener('keydown', e => {
            if (e.key === 'Escape') closeModal();
        });
        
        // Initial count
        updateCounts();
    </script>
</body>
</html>